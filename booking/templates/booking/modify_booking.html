{% extends 'booking/base.html' %}

{% block content %}
<div class="card" style="max-width: 600px; margin: 2rem auto;">
    <h2>Modify Booking</h2>
    <p style="color: #666; margin-bottom: 2rem;">Update your booking details</p>
    
    <div style="background: #dbeafe; padding: 1rem; border-radius: 8px; margin-bottom: 2rem;">
        <p><strong>Booking Reference:</strong> {{ booking.booking_reference }}</p>
        <p><strong>Bus:</strong> {{ booking.bus.bus_name }} ({{ booking.bus.bus_number }})</p>
        <p><strong>Journey Date:</strong> {{ booking.booking_date|date:"d F Y" }}</p>
        <p><strong>Available Seats:</strong> {{ available_seats }}</p>
    </div>
    
    <form method="POST">
        {% csrf_token %}
        
        <div class="form-group">
            <label>Number of Seats</label>
            {{ form.seats_booked }}
            <small style="color: #666;">Maximum {{ available_seats }} seats available</small>
        </div>
        
        <div class="form-group">
            <label>Passenger Name</label>
            {{ form.passenger_name }}
        </div>
        
        <div class="form-group">
            <label>Email Address</label>
            {{ form.passenger_email }}
        </div>
        
        <div class="form-group">
            <label>Phone Number</label>
            {{ form.passenger_phone }}
        </div>
        
        <div style="background: #f3f4f6; padding: 1rem; border-radius: 8px; margin: 1rem 0;">
            <p><strong>Current Total:</strong> ₹{{ booking.total_price }}</p>
            <p><strong>Price per Seat:</strong> ₹{{ booking.bus.price }}</p>
        </div>
        
        {% if form.errors %}
        <div class="message error">
            {{ form.errors }}
        </div>
        {% endif %}
        
        <div style="display: flex; gap: 1rem; margin-top: 1.5rem;">
            <button type="submit" class="btn btn-primary" style="flex: 1;">
                 Save Changes
            </button>
            <a href="{% url 'booking_review' booking.id %}" class="btn" style="flex: 1; text-align: center; background: #6b7280; color: white; text-decoration: none;">
                Cancel
            </a>
        </div>
    </form>
</div>
{% endblock %}